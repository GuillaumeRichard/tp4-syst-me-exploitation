import sys
from connexion import Connexion
from protocole_xml import ProtocoleXml
from protocole_json import ProtocoleJson
from file_system import FileSystem
from client import Client

host = '138.197.156.251'
root = '../dropbox/'

if __name__ == '__main__':

    # if len(sys.argv) > 3 or sys.argv[2] != 'xml' or sys.argv[2] != 'json':
    #   sys.exit(1)

    port = int(sys.argv[1])

    connexion = Connexion(host, port)

    if sys.argv[2] == 'xml':
        protocol = ProtocoleXml()
    else:
        protocol = ProtocoleJson()

    file_system = FileSystem(root)

    client = Client(connexion, protocol, file_system)
